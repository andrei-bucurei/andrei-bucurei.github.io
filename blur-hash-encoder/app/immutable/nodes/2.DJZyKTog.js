import{t as W,a as $,e as Ea,d as _e}from"../chunks/qAS4O2O_.js";import{C as Da,m as Ta,q as Se,n as q,D as Sa,p as Pa,g as m,ag as Aa,H as Ra,r as Ge,t as Pe,y as me,a7 as Ha,v as na,w as oa,x as Oa,as as Ae,aa as ia,h as Me,at as La,aj as Na,s as Ye,au as $a,av as Ua,X as Ba,aw as Fa,A as ka,ax as qa,ay as Va,a4 as ja,k as Wa,az as za,j as Ga,aA as Ya,aB as Ja,E as Ka,aC as Xa,aD as Qa,ac as Be,a as la,aE as Za,aF as et,a1 as at,z as ce,Y as Je,Z as Ke,_ as tt,aG as rt,ad as st,O as nt,aq as te,R as A,P as K,Q as ot,W as T,e as j,aH as it,B as Xe,V as P,M as X,aI as Qe}from"../chunks/CmoOLJhX.js";import{a as lt,b as ct,w as ft,l as ca,d as ut,c as vt,r as dt,s as re,e as ht,f as _t}from"../chunks/Bxu7uXIm.js";import{a as mt,p as we,i as G}from"../chunks/Brjbje1A.js";function pt(e,a){return a}function gt(e,a,t,i){for(var n=[],v=a.length,d=0;d<v;d++)Ua(a[d].e,n,!0);var y=v>0&&n.length===0&&t!==null;if(y){var C=t.parentNode;Ba(C),C.append(t),i.clear(),Q(e,a[0].prev,a[v-1].next)}Fa(n,()=>{for(var x=0;x<v;x++){var c=a[x];y||(i.delete(c.k),Q(e,c.prev,c.next)),ka(c.e,!y)}})}function Ze(e,a,t,i,n,v=null){var d=e,y={flags:a,items:new Map,first:null};{var C=e;d=q?Se(Sa(C)):C.appendChild(Da())}q&&Pa();var x=null,c=!1,s=Aa(()=>{var r=t();return Wa(r)?r:r==null?[]:ia(r)});Ta(()=>{var r=m(s),o=r.length;if(c&&o===0)return;c=o===0;let l=!1;if(q){var u=d.data===Ra;u!==(o===0)&&(d=Ge(),Se(d),Pe(!1),l=!0)}if(q){for(var _=null,p,I=0;I<o;I++){if(me.nodeType===8&&me.data===Ha){d=me,l=!0,Pe(!1);break}var R=r[I],M=i(R,I);p=fa(me,y,_,null,R,M,I,n,a,t),y.items.set(M,p),_=p}o>0&&Se(Ge())}q||xt(r,y,d,n,a,i,t),v!==null&&(o===0?x?na(x):x=oa(()=>v(d)):x!==null&&Oa(x,()=>{x=null})),l&&Pe(!0),m(s)}),q&&(d=me)}function xt(e,a,t,i,n,v,d){var y=e.length,C=a.items,x=a.first,c=x,s,r=null,o=[],l=[],u,_,p,I;for(I=0;I<y;I+=1){if(u=e[I],_=v(u,I),p=C.get(_),p===void 0){var R=c?c.e.nodes_start:t;r=fa(R,a,r,r===null?a.first:r.next,u,_,I,i,n,d),C.set(_,r),o=[],l=[],c=r.next;continue}if(bt(p,u,I),p.e.f&Ae&&na(p.e),p!==c){if(s!==void 0&&s.has(p)){if(o.length<l.length){var M=l[0],b;r=M.prev;var g=o[0],D=o[o.length-1];for(b=0;b<o.length;b+=1)ea(o[b],M,t);for(b=0;b<l.length;b+=1)s.delete(l[b]);Q(a,g.prev,D.next),Q(a,r,g),Q(a,D,M),c=M,r=D,I-=1,o=[],l=[]}else s.delete(p),ea(p,c,t),Q(a,p.prev,p.next),Q(a,p,r===null?a.first:r.next),Q(a,r,p),r=p;continue}for(o=[],l=[];c!==null&&c.k!==_;)c.e.f&Ae||(s??(s=new Set)).add(c),l.push(c),c=c.next;if(c===null)continue;p=c}o.push(p),r=p,c=p.next}if(c!==null||s!==void 0){for(var F=s===void 0?[]:ia(s);c!==null;)c.e.f&Ae||F.push(c),c=c.next;var U=F.length;if(U>0){var V=y===0?t:null;gt(a,F,V,C)}}Me.first=a.first&&a.first.e,Me.last=r&&r.e}function bt(e,a,t,i){La(e.v,a),e.i=t}function fa(e,a,t,i,n,v,d,y,C,x){var c=(C&qa)!==0,s=(C&Va)===0,r=c?s?Na(n):Ye(n):n,o=C&$a?Ye(d):d,l={i:o,v:r,k:v,a:null,e:null,prev:t,next:i};try{return l.e=oa(()=>y(e,r,o,x),q),l.e.prev=t&&t.e,l.e.next=i&&i.e,t===null?a.first=l:(t.next=l,t.e.next=l.e),i!==null&&(i.prev=l,i.e.prev=l.e),l}finally{}}function ea(e,a,t){for(var i=e.next?e.next.e.nodes_start:t,n=a?a.e.nodes_start:t,v=e.e.nodes_start;v!==i;){var d=ja(v);n.before(v),v=d}}function Q(e,a,t){a===null?e.first=t:(a.next=t,a.e.next=t&&t.e),t!==null&&(t.prev=a,t.e.prev=a&&a.e)}function Re(e){if(q){var a=!1,t=()=>{if(!a){if(a=!0,e.hasAttribute("value")){var i=e.value;se(e,"value",null),e.value=i}if(e.hasAttribute("checked")){var n=e.checked;se(e,"checked",null),e.checked=n}}};e.__on_r=t,za(t),lt()}}function yt(e,a){var t=e.__attributes??(e.__attributes={});t.value===(t.value=a??void 0)||e.value===a&&(a!==0||e.nodeName!=="PROGRESS")||(e.value=a??"")}function se(e,a,t,i){var n=e.__attributes??(e.__attributes={});q&&(n[a]=e.getAttribute(a),a==="src"||a==="srcset"||a==="href"&&e.nodeName==="LINK")||n[a]!==(n[a]=t)&&(a==="style"&&"__styles"in e&&(e.__styles={}),a==="loading"&&(e[Ya]=t),t==null?e.removeAttribute(a):typeof t!="string"&&wt(e).includes(a)?e[a]=t:e.setAttribute(a,t))}var aa=new Map;function wt(e){var a=aa.get(e.nodeName);if(a)return a;aa.set(e.nodeName,a=[]);for(var t,i=e,n=Element.prototype;n!==i;){t=Ja(i);for(var v in t)t[v].set&&a.push(v);i=Ga(i)}return a}function Mt(e,a,t){var i=e.__className,n=Ct(a);q&&e.className===n?e.__className=n:(i!==n||q&&e.className!==n)&&(a==null?e.removeAttribute("class"):e.className=n,e.__className=n)}function Ct(e,a){return(e??"")+""}function be(e,a,t){if(t){if(e.classList.contains(a))return;e.classList.add(a)}else{if(!e.classList.contains(a))return;e.classList.remove(a)}}const It=()=>performance.now(),Y={tick:e=>requestAnimationFrame(e),now:()=>It(),tasks:new Set};function ua(){const e=Y.now();Y.tasks.forEach(a=>{a.c(e)||(Y.tasks.delete(a),a.f())}),Y.tasks.size!==0&&Y.tick(ua)}function Et(e){let a;return Y.tasks.size===0&&Y.tick(ua),{promise:new Promise(t=>{Y.tasks.add(a={c:e,f:t})}),abort(){Y.tasks.delete(a)}}}function ye(e,a){ft(()=>{e.dispatchEvent(new CustomEvent(a))})}function Dt(e){if(e==="float")return"cssFloat";if(e==="offset")return"cssOffset";if(e.startsWith("--"))return e;const a=e.split("-");return a.length===1?a[0]:a[0]+a.slice(1).map(t=>t[0].toUpperCase()+t.slice(1)).join("")}function ta(e){const a={},t=e.split(";");for(const i of t){const[n,v]=i.split(":");if(!n||v===void 0)break;const d=Dt(n.trim());a[d]=v.trim()}return a}const Tt=e=>e;function He(e,a,t,i){var n=(e&Za)!==0,v="both",d,y=a.inert,C=a.style.overflow,x,c;function s(){var _=tt,p=Me;Je(null),Ke(null);try{return d??(d=t()(a,(i==null?void 0:i())??{},{direction:v}))}finally{Je(_),Ke(p)}}var r={is_global:n,in(){a.inert=y,ye(a,"introstart"),x=Ue(a,s(),c,1,()=>{ye(a,"introend"),x==null||x.abort(),x=d=void 0,a.style.overflow=C})},out(_){a.inert=!0,ye(a,"outrostart"),c=Ue(a,s(),x,0,()=>{ye(a,"outroend"),_==null||_()})},stop:()=>{x==null||x.abort(),c==null||c.abort()}},o=Me;if((o.transitions??(o.transitions=[])).push(r),ct){var l=n;if(!l){for(var u=o.parent;u&&u.f&Ka;)for(;(u=u.parent)&&!(u.f&Xa););l=!u||(u.f&Qa)!==0}l&&Be(()=>{la(()=>r.in())})}}function Ue(e,a,t,i,n){var v=i===1;if(et(a)){var d,y=!1;return at(()=>{if(!y){var _=a({direction:v?"in":"out"});d=Ue(e,_,t,i,n)}}),{abort:()=>{y=!0,d==null||d.abort()},deactivate:()=>d.deactivate(),reset:()=>d.reset(),t:()=>d.t()}}if(t==null||t.deactivate(),!(a!=null&&a.duration))return n(),{abort:ce,deactivate:ce,reset:ce,t:()=>i};const{delay:C=0,css:x,tick:c,easing:s=Tt}=a;var r=[];if(v&&t===void 0&&(c&&c(0,1),x)){var o=ta(x(0,1));r.push(o,o)}var l=()=>1-i,u=e.animate(r,{duration:C});return u.onfinish=()=>{var _=(t==null?void 0:t.t())??1-i;t==null||t.abort();var p=i-_,I=a.duration*Math.abs(p),R=[];if(I>0){var M=!1;if(x)for(var b=Math.ceil(I/16.666666666666668),g=0;g<=b;g+=1){var D=_+p*s(g/b),F=ta(x(D,1-D));R.push(F),M||(M=F.overflow==="hidden")}M&&(e.style.overflow="hidden"),l=()=>{var U=u.currentTime;return _+p*s(U/I)},c&&Et(()=>{if(u.playState!=="running")return!1;var U=l();return c(U,1-U),!0})}u=e.animate(R,{duration:I,fill:"forwards"}),u.onfinish=()=>{l=()=>i,c==null||c(i,1-i),n()}},{abort:()=>{u&&(u.cancel(),u.effect=null,u.onfinish=ce)},deactivate:()=>{n=ce},reset:()=>{i===0&&(c==null||c(1,0))},t:()=>l()}}function Oe(e,a,t=a){var i=rt();ca(e,"input",n=>{var v=n?e.defaultValue:e.value;if(v=Le(e)?Ne(v):v,t(v),i&&v!==(v=a())){var d=e.selectionStart,y=e.selectionEnd;e.value=v??"",y!==null&&(e.selectionStart=d,e.selectionEnd=Math.min(y,e.value.length))}}),(q&&e.defaultValue!==e.value||la(a)==null&&e.value)&&t(Le(e)?Ne(e.value):e.value),st(()=>{var n=a();Le(e)&&n===Ne(e.value)||e.type==="date"&&!n&&!e.value||n!==e.value&&(e.value=n??"")})}function Le(e){var a=e.type;return a==="number"||a==="range"}function Ne(e){return e===""?null:+e}function va(e,a,t){if(e.multiple)return At(e,a);for(var i of e.options){var n=pe(i);if(mt(n,a)){i.selected=!0;return}}(!t||a!==void 0)&&(e.selectedIndex=-1)}function St(e,a){Be(()=>{var t=new MutationObserver(()=>{var i=e.__value;va(e,i)});return t.observe(e,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),()=>{t.disconnect()}})}function Pt(e,a,t=a){var i=!0;ca(e,"change",n=>{var v=n?"[selected]":":checked",d;if(e.multiple)d=[].map.call(e.querySelectorAll(v),pe);else{var y=e.querySelector(v)??e.querySelector("option:not([disabled])");d=y&&pe(y)}t(d)}),Be(()=>{var n=a();if(va(e,n,i),i&&n===void 0){var v=e.querySelector(":checked");v!==null&&(n=pe(v),t(n))}e.__value=n,i=!1}),St(e)}function At(e,a){for(var t of e.options)t.selected=~a.indexOf(pe(t))}function pe(e){return"__value"in e?e.__value:e.value}function da(e){const a=e-1;return a*a*a+1}function ra(e){const a=typeof e=="string"&&e.match(/^\s*(-?[\d.]+)([^\s]*)\s*$/);return a?[parseFloat(a[1]),a[2]||"px"]:[e,"px"]}function Rt(e,{delay:a=0,duration:t=400,easing:i=da,x:n=0,y:v=0,opacity:d=0}={}){const y=getComputedStyle(e),C=+y.opacity,x=y.transform==="none"?"":y.transform,c=C*(1-d),[s,r]=ra(n),[o,l]=ra(v);return{delay:a,duration:t,easing:i,css:(u,_)=>`
			transform: ${x} translate(${(1-u)*s}${r}, ${(1-u)*o}${l});
			opacity: ${C-c*_}`}}function sa(e,{delay:a=0,duration:t=400,easing:i=da,start:n=0,opacity:v=0}={}){const d=getComputedStyle(e),y=+d.opacity,C=d.transform==="none"?"":d.transform,x=1-n,c=y*(1-v);return{delay:a,duration:t,easing:i,css:(s,r)=>`
			transform: ${C} scale(${1-x*r});
			opacity: ${y-c*r}
		`}}const $e=function(e){const a=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","#","$","%","*","+",",","-",".",":",";","=","?","@","[","]","^","_","{","|","}","~"],t=s=>{let r=0;for(let o=0;o<s.length;o++){const l=s[o];r=83*r+a.indexOf(l)}return r},i=(s,r)=>{var o="";for(let l=1;l<=r;l++){let u=Math.floor(s)/Math.pow(83,r-l)%83;o+=a[Math.floor(u)]}return o},n=s=>{let r=s/255;return r<=.04045?r/12.92:Math.pow((r+.055)/1.055,2.4)},v=s=>{let r=Math.max(0,Math.min(1,s));return r<=.0031308?Math.round(12.92*r*255+.5):Math.round(255*(1.055*Math.pow(r,.4166666666666667)-.055)+.5)},d=(s,r)=>(o=>o<0?-1:1)(s)*Math.pow(Math.abs(s),r),y=s=>{if(!s||s.length<6)throw new Error("The blurhash string must be at least 6 characters");const r=t(s[0]),o=Math.floor(r/9)+1,l=r%9+1;if(s.length!==4+2*l*o)throw new Error(`blurhash length mismatch: length is ${s.length} but it should be ${4+2*l*o}`)},C=s=>{const r=s>>8&255,o=255&s;return[n(s>>16),n(r),n(o)]},x=(s,r)=>{const o=Math.floor(s/361),l=Math.floor(s/19)%19,u=s%19;return[d((o-9)/9,2)*r,d((l-9)/9,2)*r,d((u-9)/9,2)*r]},c=(s,r,o,l)=>{let u=0,_=0,p=0;const I=4*r;for(let M=0;M<r;M++)for(let b=0;b<o;b++){const g=l(M,b);u+=g*n(s[4*M+0+b*I]),_+=g*n(s[4*M+1+b*I]),p+=g*n(s[4*M+2+b*I])}let R=1/(r*o);return[u*R,_*R,p*R]};return e.decodePromise=(s,r,o,l=1)=>new Promise((u,_)=>{u(e.decode(s,r,o,l))}),e.decode=(s,r,o,l=1)=>{y(s),l|=1;const u=t(s[0]),_=Math.floor(u/9)+1,p=u%9+1,I=(t(s[1])+1)/166,R=new Array(p*_);for(let g=0;g<R.length;g++)if(g===0){const D=t(s.substring(2,6));R[g]=C(D)}else{const D=t(s.substring(4+2*g,6+2*g));R[g]=x(D,I*l)}const M=4*r,b=new Uint8ClampedArray(M*o);for(let g=0;g<o;g++)for(let D=0;D<r;D++){let F=0,U=0,V=0;for(let z=0;z<_;z++)for(let oe=0;oe<p;oe++){const ie=Math.cos(Math.PI*D*oe/r)*Math.cos(Math.PI*g*z/o);let Z=R[oe+z*p];F+=Z[0]*ie,U+=Z[1]*ie,V+=Z[2]*ie}let ne=v(F),fe=v(U),ue=v(V);b[4*D+0+g*M]=ne,b[4*D+1+g*M]=fe,b[4*D+2+g*M]=ue,b[4*D+3+g*M]=255}return b},e.encodePromise=(s,r,o,l,u)=>new Promise((_,p)=>{_(e.encode(s,r,o,l,u))}),e.encode=(s,r,o,l,u)=>{if(l<1||l>9||u<1||u>9)throw new Error("BlurHash must have between 1 and 9 components");if(r*o*4!==s.length)throw new Error("Width and height must match the pixels array");let _=[];for(let b=0;b<u;b++)for(let g=0;g<l;g++){const D=g==0&&b==0?1:2,F=c(s,r,o,(U,V)=>D*Math.cos(Math.PI*g*U/r)*Math.cos(Math.PI*b*V/o));_.push(F)}const p=_[0],I=_.slice(1);let R,M="";if(M+=i(l-1+9*(u-1),1),I.length>0){let b=Math.max(...I.map(D=>Math.max(...D))),g=Math.floor(Math.max(0,Math.min(82,Math.floor(166*b-.5))));R=(g+1)/166,M+=i(g,1)}else R=1,M+=i(0,1);return M+=i((b=>(v(b[0])<<16)+(v(b[1])<<8)+v(b[2]))(p),4),I.forEach(b=>{M+=i(((g,D)=>19*Math.floor(Math.max(0,Math.min(18,Math.floor(9*d(g[0]/D,.5)+9.5))))*19+19*Math.floor(Math.max(0,Math.min(18,Math.floor(9*d(g[1]/D,.5)+9.5))))+Math.floor(Math.max(0,Math.min(18,Math.floor(9*d(g[2]/D,.5)+9.5)))))(b,R),2)}),M},e.getImageData=s=>{const r=s.width,o=s.height,l=document.createElement("canvas"),u=l.getContext("2d");return l.width=r,l.height=o,u.width=r,u.height=o,u.drawImage(s,0,0),u.getImageData(0,0,r,o).data},e.drawImageDataOnNewCanvas=(s,r,o)=>{const l=document.createElement("canvas"),u=l.getContext("2d");return l.width=r,l.height=o,u.width=r,u.height=o,u.putImageData(new ImageData(s,r,o),0,0),l},e.getImageDataAsImageWithOnloadPromise=(s,r,o)=>new Promise((l,u)=>{e.getImageDataAsImage(s,r,o,(_,p)=>{l(p)})}),e.getImageDataAsImage=(s,r,o,l)=>{const u=e.drawImageDataOnNewCanvas(s,r,o).toDataURL(),_=new Image(r,o);return _.onload=p=>l(p,_),_.width=r,_.height=o,_.src=u,_},e}({});async function Ht(e,a,t){const i=m(a).split(/\r?\n/).filter(n=>n.trim()!=="");await new Promise(n=>setTimeout(n,0)),j(a,""),t(i)}async function Ot(e,a,t){j(a,we(m(a).filter(i=>i.status!=="failed"))),j(t,!0),await new Promise(i=>setTimeout(i,2e3)),j(t,!1)}var Lt=Ea('<script src="analytics.js"><\/script><!---->',1),Nt=W('<img alt="BlurHash" class="svelte-127ncfx">'),$t=W('<span class="not-available svelte-127ncfx">n/a</span>'),Ut=(e,a,t)=>a(e,t().blurHash),Bt=W('<input class="blur-hash svelte-127ncfx" type="text" title="Copy" readonly=""> <button class="copy-button svelte-127ncfx">⧉</button>',1),Ft=W('| <span class="cors-tag svelte-127ncfx" title="Used CORS proxy">CORS</span>',1),kt=W("<span> </span>"),qt=W('<div class="item svelte-127ncfx"><div class="thumbnail image-thumbnail svelte-127ncfx"><img alt="Original" class="svelte-127ncfx"></div> <div class="spacer svelte-127ncfx"></div> <div class="thumbnail blur-hash-thumbnail svelte-127ncfx"><!> <!></div> <div class="spacer svelte-127ncfx"></div> <div class="info svelte-127ncfx"><div class="blur-hash-section svelte-127ncfx"><span class="label svelte-127ncfx">BlurHash:</span> <!></div> <div class="truncated svelte-127ncfx"><span class="label svelte-127ncfx">Components:</span> <span> </span></div> <div class="truncated svelte-127ncfx"><span class="label svelte-127ncfx">URL:</span> <a target="_blank"> </a></div> <div class="truncated svelte-127ncfx"><span class="label svelte-127ncfx">Status:</span> <span> </span> <!></div> <div class="truncated svelte-127ncfx"><span class="label svelte-127ncfx">Duration:</span> <!></div></div></div>'),Vt=W("<option> </option>"),jt=W('<button class="tool-bar-button svelte-127ncfx" title="Export completed tasks"><!></button>'),Wt=W('<button class="tool-bar-button svelte-127ncfx" title="Clear failed tasks"><!></button>'),zt=W('<div id="page-layout" class="svelte-127ncfx"><header class="svelte-127ncfx"><h1>BlurHash Encoder</h1> <textarea id="input" rows="4" placeholder="Enter image URLs" class="svelte-127ncfx"></textarea> <div id="tool-bar" class="svelte-127ncfx"><button class="tool-bar-button svelte-127ncfx">Encode</button> <div id="settings" class="svelte-127ncfx">Components: <input class="components-input svelte-127ncfx" type="number" min="1" max="10"> ✕ <input class="components-input svelte-127ncfx" type="number" min="1" max="10"></div> <div id="cors-proxy-settings"><label for="cors-proxy-server-select">CORS Proxy:</label> <select id="cors-proxy-server-select" class="svelte-127ncfx"></select> <a>View site</a></div> <div id="tools" class="svelte-127ncfx"><span> <!></span> | <span> <!></span></div></div></header> <main class="svelte-127ncfx"><noscript></noscript> <div id="items"></div></main> <footer class="svelte-127ncfx">Built with <a href="https://kit.svelte.dev/">Svelte</a> 5</footer></div>');function Xt(e,a){nt(a,!0);const t=(f,h=ce)=>{var S=qt(),H=A(S),O=A(H);P(H);var w=T(H,4),E=A(w);{var B=L=>{var N=Nt();K(()=>se(N,"src",h().blurHashImageSrc)),$(L,N)};G(E,L=>{h().blurHashImageSrc&&L(B)})}var k=T(E,2);{var We=L=>{var N=$t();$(L,N)};G(k,L=>{h().status==="failed"&&L(We)})}P(w);var le=T(w,4),ee=A(le),ge=T(A(ee),2);{var Ce=L=>{var N=Bt(),he=Xe(N);Re(he);var Te=T(he,2);Te.__click=[Ut,R,h],K(()=>yt(he,h().blurHash)),$(L,N)},Ie=L=>{var N=_e("n/a");$(L,N)};G(ge,L=>{h().blurHash!==""?L(Ce):L(Ie,!1)})}P(ee);var ve=T(ee,2),J=T(A(ve),2),ae=A(J);P(J),P(ve);var de=T(ve,2),Ee=T(A(de),2),ga=A(Ee,!0);P(Ee),P(de);var De=T(de,2),xe=T(A(De),2),xa=A(xe,!0);P(xe);var ba=T(xe,2);{var ya=L=>{var N=Ft();Qe(),$(L,N)};G(ba,L=>{h().usedCorsProxy&&L(ya)})}P(De);var ze=T(De,2),wa=T(A(ze),2);{var Ma=L=>{var N=kt();const he=X(()=>h().endDate.getTime()-h().startDate.getTime()),Te=X(()=>h().startDate.toLocaleString()+"."+h().startDate.getMilliseconds()),Ca=X(()=>h().endDate.toLocaleString()+"."+h().endDate.getMilliseconds());var Ia=A(N);P(N),K(()=>{se(N,"title",`${m(Te)??""} - ${m(Ca)??""}`),re(Ia,`${m(he)??""} ms`)}),$(L,N)};G(wa,L=>{h().endDate&&L(Ma)})}P(ze),P(le),P(S),K(()=>{se(O,"src",h().imageSrc),re(ae,`${h().xComponents??""} ✕ ${h().yComponents??""}`),se(Ee,"href",h().imageSrc),re(ga,h().imageSrc),Mt(xe,`task-status ${h().status??""} svelte-127ncfx`),re(xa,h().status)}),ht("error",O,I),_t(O),He(3,S,()=>Rt,()=>({x:"50%"})),$(f,S)},i=[{name:"corsproxy.io",url:"https://corsproxy.io/",getProxyUrl:f=>`https://corsproxy.io/?url=${encodeURIComponent(f)}`,isEnabled:!0},{name:"codetabs.com CORS Proxy",url:"https://codetabs.com/cors-proxy/cors-proxy.html",getProxyUrl:f=>`https://api.codetabs.com/v1/proxy?quest=${encodeURIComponent(f)}`,isEnabled:!0},{name:"allorigins.win",url:"https://allorigins.win/",getProxyUrl:f=>`https://api.allorigins.win/raw?url=${encodeURIComponent(f)}`,isEnabled:!0},{name:"CORS Proxy by HTMLDriven (disabled)",url:"https://cors-proxy.htmldriven.com/",getProxyUrl:f=>`https://cors-proxy.htmldriven.com/?url=${encodeURIComponent(f)}`,isEnabled:!1}];let n=te(we(i[0])),v=te(""),d=te(4),y=te(4),C=te(we([])),x=te(!1),c=te(!1);const s=X(()=>m(C).filter(f=>f.status==="completed").length),r=X(()=>m(C).filter(f=>f.status==="failed").length),o=X(()=>m(v).trim()===""),l=X(()=>m(d)>0&&m(y)>0),u=X(()=>m(o)||!m(l));function _(f){const S=`job-${Math.random().toString(36).substring(2,8)}-${Date.now()}`,H=m(d),O=m(y),w=f.map((E,B)=>we({id:`${S}-${B}`,url:E,xComponents:H,yComponents:O,blurHash:"",image:new Image,imageSrc:E,blurHashImage:new Image,blurHashImageSrc:"",startDate:new Date,endDate:null,usedCorsProxy:!1,status:"in-progress",error:null}));m(C).unshift(...w);for(const E of w)p(E)}async function p(f){const h=new Date;f.startDate=h;const S=f.url;let H=null,O=!1;const w=new Image;w.crossOrigin="Anonymous";try{await new Promise((J,ae)=>{w.onload=J,w.onerror=ae,w.src=S})}catch(J){H=J}if(H!=null){H=null;const J=m(n).getProxyUrl(S);try{await new Promise((ae,de)=>{w.onload=ae,w.onerror=de,w.src=J}),O=!0}catch(ae){H=ae}}if(H!=null){f.status="failed",f.error=H,f.endDate=new Date;return}const E=64;let B=w.width,k=w.height;B>k?B>E&&(k=Math.round(k*E/B),B=E):k>E&&(B=Math.round(B*E/k),k=E);const le=new OffscreenCanvas(B,k).getContext("2d");if(le==null){f.status="failed",f.error=new Error("Failed to get 2d context"),f.endDate=new Date,f.usedCorsProxy=O;return}le.drawImage(w,0,0,w.width,w.height,0,0,B,k);const ee=le.getImageData(0,0,B,k),ge=await $e.encodePromise(ee.data,ee.width,ee.height,f.xComponents,f.yComponents),Ce=await $e.decodePromise(ge,B,k,1),Ie=await $e.getImageDataAsImageWithOnloadPromise(Ce,B,k),ve=new Date;f.endDate=ve,f.blurHash=ge,f.blurHashImageSrc=Ie.src,f.status="completed",f.usedCorsProxy=O}function I(f){f.target.classList.add("broken-image")}async function R(f,h){try{await navigator.clipboard.writeText(h)}catch(O){console.error("Failed to copy text: ",O);return}const S=f.target;S instanceof HTMLButtonElement&&(S.classList.add("success"),S.disabled=!0,await new Promise(O=>setTimeout(O,1e3)),S.classList.remove("success"),S.disabled=!1)}async function M(){const h=m(C).filter(E=>E.status==="completed").map(E=>({url:E.url,xComponents:E.xComponents,yComponents:E.yComponents,blurHash:E.blurHash})),S=JSON.stringify(h,null,2),H=new Blob([S],{type:"application/json"}),O=URL.createObjectURL(H),w=document.createElement("a");w.href=O,w.download="blur-hashes.json",w.click(),URL.revokeObjectURL(O),j(x,!0),await new Promise(E=>setTimeout(E,2e3)),j(x,!1)}var b=zt();vt(f=>{var h=Lt();it.title="BlurHash Encoder",T(Xe(h)),$(f,h)});var g=A(b),D=T(A(g),2);dt(D);var F=T(D,2),U=A(F);U.__click=[Ht,v,_];var V=T(U,2),ne=T(A(V));Re(ne);var fe=T(ne,2);Re(fe),P(V);var ue=T(V,2),z=T(A(ue),2);Ze(z,21,()=>i,pt,(f,h)=>{var S=Vt(),H={},O=A(S,!0);P(S),K(()=>{H!==(H=m(h))&&(S.value=(S.__value=m(h))==null?"":m(h)),S.disabled=!m(h).isEnabled,re(O,m(h).name)}),$(f,S)}),P(z);var oe=T(z,2);P(ue);var ie=T(ue,2),Z=A(ie),Fe=A(Z),ha=T(Fe);{var _a=f=>{var h=jt();h.__click=M;var S=A(h);{var H=w=>{var E=_e("Exported");$(w,E)},O=w=>{var E=_e("📥 Export");$(w,E)};G(S,w=>{m(x)?w(H):w(O,!1)})}P(h),K(()=>{h.disabled=m(x),be(h,"success",m(x))}),He(3,h,()=>sa),$(f,h)};G(ha,f=>{m(s)>0&&f(_a)})}P(Z);var ke=T(Z,2),qe=A(ke),ma=T(qe);{var pa=f=>{var h=Wt();h.__click=[Ot,C,c];var S=A(h);{var H=w=>{var E=_e("Cleared");$(w,E)},O=w=>{var E=_e("❌ Clear");$(w,E)};G(S,w=>{m(c)?w(H):w(O,!1)})}P(h),K(()=>{h.disabled=m(c),be(h,"success",m(c))}),He(3,h,()=>sa),$(f,h)};G(ma,f=>{(m(r)>0||m(c))&&f(pa)})}P(ke),P(ie),P(F),P(g);var Ve=T(g,2),je=T(A(Ve),2);Ze(je,21,()=>m(C),f=>f.id,(f,h)=>{t(f,()=>m(h))}),P(je),P(Ve),Qe(2),P(b),K(()=>{U.disabled=m(u),be(ne,"invalid",m(d)<=0),be(fe,"invalid",m(y)<=0),se(oe,"href",m(n).url),re(Fe,`Completed: ${m(s)??""} `),re(qe,`Failed: ${m(r)??""} `)}),Oe(D,()=>m(v),f=>j(v,f)),Oe(ne,()=>m(d),f=>j(d,f)),Oe(fe,()=>m(y),f=>j(y,f)),Pt(z,()=>m(n),f=>j(n,f)),$(e,b),ot()}ut(["click"]);export{Xt as component};
